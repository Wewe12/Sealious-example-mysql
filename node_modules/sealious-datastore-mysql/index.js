//var Promise = require("bluebird");
var Sealious = require("sealious");
var Mysql = require("mysql");
//var DbsCommonPart = require('sealious-datastore-dbs-common-part');

var DatastoreMysql  = new Sealious.ChipTypes.Datastore("mysql");



DatastoreMysql.start = function(){
	var config = Sealious.ConfigManager.get_config("datastore_mysql");

	var mysql_client = Mysql.createConnection(config);
	mysql_client.connect();

	mysql_client.query('SELECT 1 + 1 AS solution', function(err, rows, fields) {
		if (err) throw err;
		console.log('The solution is: ', rows[0].solution);
	});

	var resource_types = Sealious.ChipManager.get_chips_by_type("resource_type");
	//console.log(resource_types.places.fields.name.type_name);/*
	for (var i in resource_types) {
		var rt = resource_types[i];
		//console.log("mamy typ ", rt);
		for (var irt in rt.fields) {
			console.log(rt.fields[irt].name," ", rt.fields[irt].type_name);
		}
	}


	//mysql_client.end();
}




//DatastoreMysql = DbsCommonPart(DatastoreMysql,private);		

module.exports = DatastoreMysql;